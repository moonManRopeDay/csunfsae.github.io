<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-05-03 Fri 02:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Formula Embedded Wiki</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Forumula Embedded" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/org-bootstrap.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Formula Embedded Wiki</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9a6c80d">About</a>
<ul>
<li><a href="#org26121f4">Where's the code?</a></li>
<li><a href="#org627dac8">What's the point of this?</a></li>
<li><a href="#orgeabf94e">Where do I run this?</a></li>
<li><a href="#org8e20c50">FAQ</a></li>
</ul>
</li>
<li><a href="#orgfd5ffed">ROS</a>
<ul>
<li><a href="#orga49d308">ROS Layout</a></li>
<li><a href="#org4e6c3c9">Development Philosophy</a></li>
<li><a href="#orgd6a327a">How to get started running ROS?</a></li>
</ul>
</li>
<li><a href="#orgb04d768">Developement Board</a>
<ul>
<li><a href="#orgbb8b3fe">Nvidia Jetson Tx2</a></li>
<li><a href="#org26375ab">Software</a></li>
</ul>
</li>
<li><a href="#org8ea7ba9">Can Bus</a>
<ul>
<li><a href="#org36b0bc2">CAN Transceiver</a></li>
<li><a href="#org93c14d3">Wiring</a></li>
<li><a href="#org9b63c57">Software</a></li>
</ul>
</li>
<li><a href="#orgeb0239e">IMU</a>
<ul>
<li><a href="#org1fd3177">10 DOF IMU</a></li>
<li><a href="#org4718d0d">Wiring</a></li>
<li><a href="#org1e1ce53">Software</a></li>
</ul>
</li>
<li><a href="#org46fcc58">Analog Sensors</a>
<ul>
<li><a href="#orgfa232c9">Analog to Digital Converter</a></li>
<li><a href="#orgefda267">Wiring</a></li>
<li><a href="#org3274dc1">Software</a></li>
</ul>
</li>
<li><a href="#org6ff7b15">Digital Sensors</a>
<ul>
<li><a href="#org23019e5">Arduino Uno</a></li>
<li><a href="#orga36ba77">Software</a></li>
</ul>
</li>
<li><a href="#orga944d1f">4G LTE</a>
<ul>
<li><a href="#org16d7f24">4G Modem</a></li>
<li><a href="#org8064b4e">Software</a></li>
</ul>
</li>
<li><a href="#org24ac0cb">J21/J26 Pinout</a></li>
<li><a href="#org9c068f2">Helpful Links</a></li>
<li><a href="#orge2bb5c3">License</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9a6c80d" class="outline-2">
<h2 id="org9a6c80d">About</h2>
<div class="outline-text-2" id="text-org9a6c80d">
</div>
<div id="outline-container-org26121f4" class="outline-3">
<h3 id="org26121f4">Where's the code?</h3>
<div class="outline-text-3" id="text-org26121f4">
<p>
Here: <a href="https://github.com/csunfsae/jetsonTx2">Github Repo</a> 
</p>
</div>
</div>
<div id="outline-container-org627dac8" class="outline-3">
<h3 id="org627dac8">What's the point of this?</h3>
<div class="outline-text-3" id="text-org627dac8">
<p>
Our objective was to build a Data Acquisition System (DAQ) capable of collecting,
storing, and transmitting validated data from all on-board equipment to the cloud 
in real time utilizing a 4G/LTE network. In doing so, current and future CSUN FSAE teams 
will hold the capability to monitor and benchmark the performance of their vehicle 
design iterations.
</p>
</div>
</div>
<div id="outline-container-orgeabf94e" class="outline-3">
<h3 id="orgeabf94e">Where do I run this?</h3>
<div class="outline-text-3" id="text-orgeabf94e">
<p>
This software is based around <a href="http://www.ros.org">ROS</a> and, is meant to run on an Nvidia
Jetson Tx2. In addition to this SOC there are other sensors and boards 
necessary to communicate with other parts of the system. For a full
parts list refer to the internal documention found on the Google Drive.
If you happen to be visiting take a look below to get an idea of what 
hardware was used to create this project.
</p>
</div>
</div>
<div id="outline-container-org8e20c50" class="outline-3">
<h3 id="org8e20c50">FAQ</h3>
<div class="outline-text-3" id="text-org8e20c50">
</div>
<div id="outline-container-org0c59a80" class="outline-4">
<h4 id="org0c59a80">Why ROS?</h4>
<div class="outline-text-4" id="text-org0c59a80">
<p>
This is the most commonly asked question we get by other computer science 
students or engineers. The answer to that question is that it provides an excellent 
means of inter-process communication so that multiple processes written in different 
languages can communicate efficiently and reliably. Additionally it allows for the 
software to be expanded upon so that future teams can focus on implementing features
such as self-driving, collision detection, etc. Lastly it enables us to reuse software
so we can focus on adding features to our system without compromising its reliability. 
</p>
</div>
</div>
<div id="outline-container-org160dfea" class="outline-4">
<h4 id="org160dfea">Why the Nvidia Jetson?</h4>
<div class="outline-text-4" id="text-org160dfea">
<p>
This was chosen with a couple of considerations in mind such as I/O availability, 
flexibility, and speed. It provides all of the necessary means of communication 
with our sensors and ECUs found on our electric vehicle.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfd5ffed" class="outline-2">
<h2 id="orgfd5ffed">ROS</h2>
<div class="outline-text-2" id="text-orgfd5ffed">
</div>
<div id="outline-container-orga49d308" class="outline-3">
<h3 id="orga49d308">ROS Layout</h3>
<div class="outline-text-3" id="text-orga49d308">

<div class="figure">
<p><img src="ROS/ros_2019-04-29_17-36-04.png" alt="ros_2019-04-29_17-36-04.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org4e6c3c9" class="outline-3">
<h3 id="org4e6c3c9">Development Philosophy</h3>
<div class="outline-text-3" id="text-org4e6c3c9">
<p>
We keep a few things in mind when designing and implementing new features.
</p>
<ol class="org-ol">
<li>How maintainable each node will be in the future.</li>
<li>How reusable each node will be in the future.</li>
</ol>

<p>
Understanding how ROS messages and processes function is essential in making
wise design decisions. Most people are quick to think that by eliminating ROS Nodes
the system will become more efficent however this isn't always the case. Additionally
it's important to keep in mind that a monolithic system makes each node more 
difficult to maintain and reduces the reusebility of the software.
Therefore when looking to improve the system by either adding additional functionality
or making improvements to performance it's important to make sure that each node performs
only a single function (e.g. getting data from a single device and publishing its data). 
</p>

<p>
The rest of the sections of the wiki will not necessarily describe individual ROS nodes but 
instead describe parts of the system refrencing ROS nodes along the way that handle 
that part of the system. NOTE to maintainers: Update the ROS diagram you wont be the 
only person developing this so keep the next person informed.
</p>
</div>
</div>
<div id="outline-container-orgd6a327a" class="outline-3">
<h3 id="orgd6a327a">How to get started running ROS?</h3>
<div class="outline-text-3" id="text-orgd6a327a">
<p>
This part of the wiki will assume you have a working OS running with all of the necessary
kernel modules enabled in order to interface with the appropriate hardware. For a guide on
this sort of stuff look at the "Helpful Links" part of the wiki. Additionally at the time 
of <del><del>writing</del></del> editing this wiki <del><del>26 January 2019</del></del> 21 April 2019 all of our nodes, services,
etc. are based off of the <b><b>ROS Kinetic</b></b> release. 
</p>
</div>
<div id="outline-container-orgb9a4aca" class="outline-4">
<h4 id="orgb9a4aca">How do I install all the necessary ROS packages?</h4>
<div class="outline-text-4" id="text-orgb9a4aca">
<ul class="org-ul">
<li><b><b>See the helpful links section on installing ROS on the tx2</b></b></li>
<li>Otherwise a not so helpful link to get started can be found here:<a href="http://wiki.ros.org/melodic"> DIY Installation</a></li>
</ul>
</div>
</div>
<div id="outline-container-org7a6525a" class="outline-4">
<h4 id="org7a6525a">How do I use Nodejs ROS nodes?</h4>
<div class="outline-text-4" id="text-org7a6525a">
<ul class="org-ul">
<li>Make sure node is installed. See helpful links.</li>
<li>Make sure your Node modules are installed.</li>
<li>Check that your CMakeList includes your node files. See helpful links.</li>
</ul>
</div>
</div>
<div id="outline-container-org5bdaaf7" class="outline-4">
<h4 id="org5bdaaf7">How do I compile my code?</h4>
<div class="outline-text-4" id="text-org5bdaaf7">
<ol class="org-ol">
<li>Make sure the CMakeList File is correctly configured.</li>
<li>Make sure you <code>$ source devel/setup.bash</code> from the <code>catkin_ws</code> directory of the project.</li>
<li>Run <code>$ catkin_make</code></li>
<li>Otherwise see the helpful links.</li>
</ol>
</div>
</div>
<div id="outline-container-org023f892" class="outline-4">
<h4 id="org023f892">How do I run my code?</h4>
<div class="outline-text-4" id="text-org023f892">
<p>
Prereq: <b>*Always run <code>$ source devel/setup.bash</code> from <code>catkin_ws</code> *</b>
</p>
<ol class="org-ol">
<li>Make sure ros core is running: <code>$ roscore</code></li>
<li>To run each process run <code>$ rosrun fsae_electric_vehicle **Name of your node**</code> (if its nodejs add the .js extension likewise for python)</li>
</ol>
</div>
</div>
<div id="outline-container-org3804358" class="outline-4">
<h4 id="org3804358">I'm tired of running each process one by one!</h4>
<div class="outline-text-4" id="text-org3804358">
<p>
You'll have to write your own roslaunch file. Be sure to consult the helpful links but looking at the current one will give you some hints.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb04d768" class="outline-2">
<h2 id="orgb04d768">Developement Board</h2>
<div class="outline-text-2" id="text-orgb04d768">
</div>
<div id="outline-container-orgbb8b3fe" class="outline-3">
<h3 id="orgbb8b3fe">Nvidia Jetson Tx2</h3>
<div class="outline-text-3" id="text-orgbb8b3fe">

<div class="figure">
<p><img src="Developement Board/tx2_2019-05-03_02-50-48.jpeg" alt="tx2_2019-05-03_02-50-48.jpeg" />
</p>
</div>
</div>
</div>
<div id="outline-container-org26375ab" class="outline-3">
<h3 id="org26375ab">Software</h3>
<div class="outline-text-3" id="text-org26375ab">
<p>
This is our embedded linux platform where all of our embedded code lives and is responsible
for two way telemetery and real time data acquisition. Additional Kernel modules have 
been compiled in order to support devices such as CAN transcievers. In addition several other 
dependencies have been installed (if you're new to the project refer to the google drive)
</p>
</div>
</div>
</div>
<div id="outline-container-org8ea7ba9" class="outline-2">
<h2 id="org8ea7ba9">Can Bus</h2>
<div class="outline-text-2" id="text-org8ea7ba9">
</div>
<div id="outline-container-org36b0bc2" class="outline-3">
<h3 id="org36b0bc2">CAN Transceiver</h3>
<div class="outline-text-3" id="text-org36b0bc2">

<div class="figure">
<p><img src="Can Bus/proxy.duckduckgo_2019-04-21_22-40-54.jpg" alt="proxy.duckduckgo_2019-04-21_22-40-54.jpg" />
</p>
</div>
</div>
<div id="outline-container-org4a23f19" class="outline-4">
<h4 id="org4a23f19">MCP-2551 CAN Board</h4>
<div class="outline-text-4" id="text-org4a23f19">
<p>
Two Can Bus transceivers were used on this system. One was used
to communicate to the Motor Controller Unit and the other was meant
for future expansion. 
</p>
</div>
</div>
</div>
<div id="outline-container-org93c14d3" class="outline-3">
<h3 id="org93c14d3">Wiring</h3>
<div class="outline-text-3" id="text-org93c14d3">
<ul class="org-ul">
<li>These transceivers are connected to the Jetson Tx2 using the J26 header.</li>
<li>See <code>J21/J26 Pinout</code> section for pinout images</li>
</ul>
</div>
<div id="outline-container-org79ecbff" class="outline-4">
<h4 id="org79ecbff">Can Bus 0</h4>
<div class="outline-text-4" id="text-org79ecbff">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Device Pin</th>
<th scope="col" class="org-left">Jetson Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">5v</td>
<td class="org-left">Arduino 5v pin</td>
</tr>

<tr>
<td class="org-left">GND</td>
<td class="org-left">(J26 Header) 11</td>
</tr>

<tr>
<td class="org-left">CAN<sub>RX</sub></td>
<td class="org-left">(J26 Header)  5</td>
</tr>

<tr>
<td class="org-left">CAN<sub>TX</sub></td>
<td class="org-left">(J26 Header)  7</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org3cf5c0a" class="outline-4">
<h4 id="org3cf5c0a">Can Bus 1</h4>
<div class="outline-text-4" id="text-org3cf5c0a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Device Pin</th>
<th scope="col" class="org-left">Jetson Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">5v</td>
<td class="org-left">NOT CURRENTLY USED</td>
</tr>

<tr>
<td class="org-left">GND</td>
<td class="org-left">(J26 Header) 21</td>
</tr>

<tr>
<td class="org-left">CAN<sub>RX</sub></td>
<td class="org-left">(J26 Header) 15</td>
</tr>

<tr>
<td class="org-left">CAN<sub>TX</sub></td>
<td class="org-left">(J26 Header) 17</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org9b63c57" class="outline-3">
<h3 id="org9b63c57">Software</h3>
<div class="outline-text-3" id="text-org9b63c57">
<p>
The software used to interact with the MCU is held in the ROS node titled <code>CAN_BUS</code>.
This node is responsible from sending and receiving messages from the MCU (Motor Control Unit)
as well as the BMS (Battery Management System) via the 5 pin Can Bus port on the Unitek motor 
controller. This Node receives messages from the web based node and publishes data to 
the web node responsible from telemetry and sends messages out to the rest of the ECU's mentioned above.
</p>
</div>
</div>
</div>
<div id="outline-container-orgeb0239e" class="outline-2">
<h2 id="orgeb0239e">IMU</h2>
<div class="outline-text-2" id="text-orgeb0239e">
</div>
<div id="outline-container-org1fd3177" class="outline-3">
<h3 id="org1fd3177">10 DOF IMU</h3>
<div class="outline-text-3" id="text-org1fd3177">

<div class="figure">
<p><img src="IMU/10-DOF-IMU-Sensor-C-intro_2019-01-25_21-53-03.jpg" alt="10-DOF-IMU-Sensor-C-intro_2019-01-25_21-53-03.jpg" />
</p>
</div>
</div>
<div id="outline-container-org5db9338" class="outline-4">
<h4 id="org5db9338">Waveshare 10 DOF IMU (C)</h4>
<div class="outline-text-4" id="text-org5db9338">
<p>
This sensor was chosen as it's directly compatible with the jetson via I2C. It currently
is installed on I2C bus 1. This is made up of both the MPU-9255 (gyro, accel, compass) and 
the BMP280 (pressure sensor).
</p>
</div>
</div>
</div>
<div id="outline-container-org4718d0d" class="outline-3">
<h3 id="org4718d0d">Wiring</h3>
<div class="outline-text-3" id="text-org4718d0d">
<ul class="org-ul">
<li>See <code>J21/J26 Pinout</code> section for pinout images</li>
</ul>
</div>
<div id="outline-container-org1192dc8" class="outline-4">
<h4 id="org1192dc8">I2C BUS 1</h4>
<div class="outline-text-4" id="text-org1192dc8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Device Pin</th>
<th scope="col" class="org-left">Jetson Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">VCC 5v</td>
<td class="org-left">(J21 Header)  2</td>
</tr>

<tr>
<td class="org-left">GND</td>
<td class="org-left">(J21 Header)  6</td>
</tr>

<tr>
<td class="org-left">SDA</td>
<td class="org-left">(J21 Header)  3</td>
</tr>

<tr>
<td class="org-left">SCL</td>
<td class="org-left">(J21 Header)  5</td>
</tr>

<tr>
<td class="org-left">INT</td>
<td class="org-left">NOT USED</td>
</tr>

<tr>
<td class="org-left">FSYNC</td>
<td class="org-left">NOT USED</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org1e1ce53" class="outline-3">
<h3 id="org1e1ce53">Software</h3>
<div class="outline-text-3" id="text-org1e1ce53">
<p>
The software to support this device is actually split up into two ROS nodes. The 
first is located in <code>INERTIAL_MEASUREMENT_UNIT</code> and the other is in <code>BAROMETRIC_PRESSURE_SENSOR</code>. This Waveshare
device is actually composed to two separate devices the MPU-9255 and the BMP280
which have two separate addresses on the I2C bus. The MPU-9255 is composed of a
gyroscope, accelerometer, and compass. The BMP280 is a pressure/temperature sensor.
</p>
</div>
</div>
</div>
<div id="outline-container-org46fcc58" class="outline-2">
<h2 id="org46fcc58">Analog Sensors</h2>
<div class="outline-text-2" id="text-org46fcc58">
</div>
<div id="outline-container-orgfa232c9" class="outline-3">
<h3 id="orgfa232c9">Analog to Digital Converter</h3>
<div class="outline-text-3" id="text-orgfa232c9">

<div class="figure">
<p><img src="Analog Sensors/NCD_A_TO_D_2019-01-25_21-57-52.png" alt="NCD_A_TO_D_2019-01-25_21-57-52.png" />
</p>
</div>
</div>
<div id="outline-container-org7db4495" class="outline-4">
<h4 id="org7db4495">NCD 16 Channel Analog to Digital Converter</h4>
</div>
</div>
<div id="outline-container-orgefda267" class="outline-3">
<h3 id="orgefda267">Wiring</h3>
<div class="outline-text-3" id="text-orgefda267">
<ul class="org-ul">
<li>See <code>J21/J26 Pinout</code> section for pinout images</li>
</ul>
</div>
<div id="outline-container-org20421b0" class="outline-4">
<h4 id="org20421b0">I2C BUS 0</h4>
<div class="outline-text-4" id="text-org20421b0">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Device Pin</th>
<th scope="col" class="org-left">Jetson Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">GND</td>
<td class="org-left">(J21 Header)  6</td>
</tr>

<tr>
<td class="org-left">VCC 5v</td>
<td class="org-left">(J21 Header)  2</td>
</tr>

<tr>
<td class="org-left">SDA</td>
<td class="org-left">(J21 Header)  3</td>
</tr>

<tr>
<td class="org-left">SCL</td>
<td class="org-left">(J21 Header)  5</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org3274dc1" class="outline-3">
<h3 id="org3274dc1">Software</h3>
<div class="outline-text-3" id="text-org3274dc1">
<p>
The ROS node for the analog to digital converter is named <code>ANALOG_TO_DIGITAL_CONVERTER</code> its main responsiblity is to make requests to each of the 
ADS7828 Texas Instrument chips on the ADC board shown above. These requests are sent through write commands and consist of a stream of bits outlined 
in the data sheet. Becuase each of these ADCs multiplixes between each of the eight channels it has it must be sent a command to read off the right channel.
</p>
</div>
</div>
</div>
<div id="outline-container-org6ff7b15" class="outline-2">
<h2 id="org6ff7b15">Digital Sensors</h2>
<div class="outline-text-2" id="text-org6ff7b15">

<div class="figure">
<p><img src="Digital Sensors/71DZKc+WAvL._SX466__2019-04-21_22-57-01.jpg" alt="71DZKc+WAvL._SX466__2019-04-21_22-57-01.jpg" />
</p>
</div>
</div>
<div id="outline-container-org23019e5" class="outline-3">
<h3 id="org23019e5">Arduino Uno</h3>
<div class="outline-text-3" id="text-org23019e5">
<p>
An arduino uno with an <a href="https://store.ncd.io/product/i2c-shield-for-arduino-uno/">I2C shield</a> was used to interface with the digital sensors. As of the time of writing this its performance is lack luster when calcualting
speed. This may be due to its ability to handle the amount of interrupts it's sent while the vehicle is running and may be switched out if it's a hardware limitation.
</p>
</div>
</div>
<div id="outline-container-orga36ba77" class="outline-3">
<h3 id="orga36ba77">Software</h3>
<div class="outline-text-3" id="text-orga36ba77">
<p>
The software for this part of the system is located in the ROS node titled <code>SPEEDOMOTER</code>. It was decided that the only digital sensors on the car would be for calcualting 
the speed at which the car was moving therefore a microcontroller was chosen to calculate that for us and then setup the I2C line. Similar to how the Analog to Digital 
converter works requests for data are made to this device over the bus and the speed in MPH is returned to the Jetson Tx2. 
</p>
</div>
</div>
</div>
<div id="outline-container-orga944d1f" class="outline-2">
<h2 id="orga944d1f">4G LTE</h2>
<div class="outline-text-2" id="text-orga944d1f">
</div>
<div id="outline-container-org16d7f24" class="outline-3">
<h3 id="org16d7f24">4G Modem</h3>
<div class="outline-text-3" id="text-org16d7f24">

<div class="figure">
<p><img src="4G LTE/4G_LTE_2019-01-25_22-00-07.png" alt="4G_LTE_2019-01-25_22-00-07.png" />
</p>
</div>
</div>
<div id="outline-container-orgc2ebc20" class="outline-4">
<h4 id="orgc2ebc20">Sierra Wireless MC7455</h4>
</div>
</div>
<div id="outline-container-org8064b4e" class="outline-3">
<h3 id="org8064b4e">Software</h3>
<div class="outline-text-3" id="text-org8064b4e">
<p>
Although this piece of data functions as our method of communication to the outside world (Our Web Server) it also give us a few data points such as Altitude, GPS, 
and Satalite Data. The communication protocol used for interfacing with this is Serial off of character driver. In order to setup what data is being sent the minicom
utility must be used ahead of time before simply reading data off of <code>/dev/tty*USB*</code>. The code can be found in the ROS node labled <code>GPS</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-org24ac0cb" class="outline-2">
<h2 id="org24ac0cb">J21/J26 Pinout</h2>
<div class="outline-text-2" id="text-org24ac0cb">
</div>
<div id="outline-container-orgec35fc6" class="outline-4">
<h4 id="orgec35fc6">J21 Header</h4>
<div class="outline-text-4" id="text-orgec35fc6">

<div class="figure">
<p><img src="IMU/J21_Pinout_2019-01-26_13-01-22.png" alt="J21_Pinout_2019-01-26_13-01-22.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org06b286b" class="outline-4">
<h4 id="org06b286b">J26 Header</h4>
<div class="outline-text-4" id="text-org06b286b">

<div class="figure">
<p><img src="Can Bus/J26_Header_2019-01-25_21-45-45.png" alt="J26_Header_2019-01-25_21-45-45.png" />
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org9c068f2" class="outline-2">
<h2 id="org9c068f2">Helpful Links</h2>
<div class="outline-text-2" id="text-org9c068f2">
<ul class="org-ul">
<li><a href="https://www.jetsonhacks.com/2017/03/25/build-kernel-and-modules-nvidia-jetson-tx2/">How to recompile the kernel to get new kernel modules aka drivers.</a></li>
<li><a href="https://www.jetsonhacks.com/2017/03/21/jetpack-3-0-nvidia-jetson-tx2-development-kit/">How to reinstall the jetpack.</a></li>
<li><a href="https://www.jetsonhacks.com/2017/03/27/robot-operating-system-ros-nvidia-jetson-tx2/">How to install ROS on the Tx2.</a></li>
<li><a href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions-enterprise-linux-fedora-and-snap-packages">How to install Nodejs.</a></li>
<li><a href="http://wiki.ros.org/rosnodejs">How to ROS your Nodejs.</a></li>
<li><a href="http://wiki.ros.org/ROS/Tutorials">How to get started with ROS.</a></li>
<li><a href="http://wiki.ros.org/roslaunch/XML">How to write your roslauch file.</a></li>
<li><a href="http://wiki.ros.org/roslaunch/XML">Everything about roslauch files.</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge2bb5c3" class="outline-2">
<h2 id="orge2bb5c3">License</h2>
<div class="outline-text-2" id="text-orge2bb5c3">
<p>
Formula Embedded is relased under the GNU AFFERO GENERAL PUBLIC LICENSE.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Forumula Embedded</p>
<p class="date">Created: 2021-11-20 Fri 02:55</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
